<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‡ã‚¸æ´»ãƒ„ãƒ¼ãƒ«</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root {
            --bg-primary: #f0f4f8;
            --bg-secondary: #ffffff;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --border-color: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius: 16px;

            /* æ•™ç§‘ã‚«ãƒ©ãƒ¼ */
            --color-kokugo: #ef4444;
            --color-sansu: #3b82f6;
            --color-rika: #22c55e;
            --color-shakai: #f97316;
            --color-eigo: #a855f7;
            --color-ongaku: #ec4899;
            --color-zuko: #eab308;
            --color-taiiku: #06b6d4;
            --color-sonota: #6b7280;
            --color-dotoku: #14b8a6;
            --color-kateika: #f43f5e;
            --color-sogo: #6366f1;
            --color-gakkatsu: #84cc16;
        }

        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        .header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.5rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header h1::before {
            content: 'ğŸ’';
            font-size: 1.5rem;
        }

        .teacher-link {
            text-decoration: none;
            color: var(--text-secondary);
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            background: #f7fafc;
            border-radius: 50px;
            transition: all 0.2s;
        }

        .teacher-link:hover {
            background: #e2e8f0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        /* å¤§ãã‚ã®ã‚¿ãƒ– */
        .subject-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        .tab-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
            color: var(--text-secondary);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .tab-btn.active {
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* æ•™ç§‘åˆ¥ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚«ãƒ©ãƒ¼ */
        .tab-btn[data-subject="all"].active {
            background: #2d3748;
        }

        .tab-btn[data-subject="å›½èª"].active {
            background: var(--color-kokugo);
        }

        .tab-btn[data-subject="ç®—æ•°"].active {
            background: var(--color-sansu);
        }

        .tab-btn[data-subject="ç†ç§‘"].active {
            background: var(--color-rika);
        }

        .tab-btn[data-subject="ç¤¾ä¼š"].active {
            background: var(--color-shakai);
        }

        .tab-btn[data-subject="è‹±èª"].active {
            background: var(--color-eigo);
        }

        .tab-btn[data-subject="éŸ³æ¥½"].active {
            background: var(--color-ongaku);
        }

        .tab-btn[data-subject="å›³å·¥"].active {
            background: var(--color-zuko);
        }

        .tab-btn[data-subject="ä½“è‚²"].active {
            background: var(--color-taiiku);
        }

        .tab-btn[data-subject="é“å¾³"].active {
            background: var(--color-dotoku);
        }

        .tab-btn[data-subject="å®¶åº­ç§‘"].active {
            background: var(--color-kateika);
        }

        .tab-btn[data-subject="ç·åˆ"].active {
            background: var(--color-sogo);
        }

        .tab-btn[data-subject="å­¦æ´»"].active {
            background: var(--color-gakkatsu);
        }

        .tab-btn[data-subject="ãã®ä»–"].active {
            background: var(--color-sonota);
        }

        /* ã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰ */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .tool-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.2s;
            border: 2px solid transparent;
        }

        .tool-card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            height: 12px;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ã‚«ãƒ©ãƒ¼ï¼ˆå¤‰æ•°åˆ©ç”¨ï¼‰ */
        .card-header.å›½èª {
            background: var(--color-kokugo);
        }

        .card-header.ç®—æ•° {
            background: var(--color-sansu);
        }

        .card-header.ç†ç§‘ {
            background: var(--color-rika);
        }

        .card-header.ç¤¾ä¼š {
            background: var(--color-shakai);
        }

        .card-header.è‹±èª {
            background: var(--color-eigo);
        }

        .card-header.éŸ³æ¥½ {
            background: var(--color-ongaku);
        }

        .card-header.å›³å·¥ {
            background: var(--color-zuko);
        }

        .card-header.ä½“è‚² {
            background: var(--color-taiiku);
        }

        .card-header.é“å¾³ {
            background: var(--color-dotoku);
        }

        .card-header.å®¶åº­ç§‘ {
            background: var(--color-kateika);
        }

        .card-header.ç·åˆ {
            background: var(--color-sogo);
        }

        .card-header.å­¦æ´» {
            background: var(--color-gakkatsu);
        }

        .card-header.ãã®ä»– {
            background: var(--color-sonota);
        }

        .card-body {
            padding: 1.5rem;
        }

        .subject-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            color: white;
            margin-bottom: 0.5rem;
            background: #cbd5e0;
            /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ */
        }

        /* ãƒãƒƒã‚¸ã‚«ãƒ©ãƒ¼ */
        .subject-badge.å›½èª {
            background: var(--color-kokugo);
        }

        .subject-badge.ç®—æ•° {
            background: var(--color-sansu);
        }

        .subject-badge.ç†ç§‘ {
            background: var(--color-rika);
        }

        .subject-badge.ç¤¾ä¼š {
            background: var(--color-shakai);
        }

        .subject-badge.è‹±èª {
            background: var(--color-eigo);
        }

        .subject-badge.éŸ³æ¥½ {
            background: var(--color-ongaku);
        }

        .subject-badge.å›³å·¥ {
            background: var(--color-zuko);
        }

        .subject-badge.ä½“è‚² {
            background: var(--color-taiiku);
        }

        .subject-badge.é“å¾³ {
            background: var(--color-dotoku);
        }

        .subject-badge.å®¶åº­ç§‘ {
            background: var(--color-kateika);
        }

        .subject-badge.ç·åˆ {
            background: var(--color-sogo);
        }

        .subject-badge.å­¦æ´» {
            background: var(--color-gakkatsu);
        }

        .subject-badge.ãã®ä»– {
            background: var(--color-sonota);
        }

        .tool-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0.5rem 0 1.5rem 0;
            color: var(--text-primary);
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
        }

        .open-btn {
            flex: 2;
            background: #2d3748;
            color: white;
            text-decoration: none;
            padding: 0.8rem;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: background 0.2s;
        }

        .open-btn:hover {
            background: #1a202c;
        }

        .qr-btn {
            flex: 1;
            background: white;
            border: 2px solid #e2e8f0;
            cursor: pointer;
            border-radius: 12px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .qr-btn:hover {
            background: #f7fafc;
            border-color: #cbd5e0;
        }

        /* QRãƒ¢ãƒ¼ãƒ€ãƒ« */
        .qr-modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .qr-modal {
            background: white;
            padding: 3rem;
            border-radius: 24px;
            text-align: center;
            max-width: 90%;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        #qrCodeContainer {
            margin: 2rem auto;
            display: flex;
            justify-content: center;
        }

        #qrToolName {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .close-qr-btn {
            margin-top: 1rem;
            padding: 0.75rem 2rem;
            font-size: 1.1rem;
            background: #edf2f7;
            border: none;
            border-radius: 50px;
            cursor: pointer;
        }

        .close-qr-btn:hover {
            background: #e2e8f0;
        }
    </style>
</head>

<body>
    <header class="header">
        <h1>ãƒ‡ã‚¸æ´»ãƒ„ãƒ¼ãƒ«</h1>
        <a href="index.html" class="teacher-link">å…ˆç”Ÿç”¨ãƒšãƒ¼ã‚¸ã¸</a>
    </header>

    <div class="container">
        <nav class="subject-tabs" id="subjectTabs">
            <button class="tab-btn active" data-subject="all">ã™ã¹ã¦</button>
            <button class="tab-btn" data-subject="å›½èª">å›½èª</button>
            <button class="tab-btn" data-subject="ç®—æ•°">ç®—æ•°</button>
            <button class="tab-btn" data-subject="ç†ç§‘">ç†ç§‘</button>
            <button class="tab-btn" data-subject="ç¤¾ä¼š">ç¤¾ä¼š</button>
            <button class="tab-btn" data-subject="è‹±èª">è‹±èª</button>
            <button class="tab-btn" data-subject="éŸ³æ¥½">éŸ³æ¥½</button>
            <button class="tab-btn" data-subject="å›³å·¥">å›³å·¥</button>
            <button class="tab-btn" data-subject="ä½“è‚²">ä½“è‚²</button>
            <button class="tab-btn" data-subject="é“å¾³">é“å¾³</button>
            <button class="tab-btn" data-subject="å®¶åº­ç§‘">å®¶åº­ç§‘</button>
            <button class="tab-btn" data-subject="ç·åˆ">ç·åˆ</button>
            <button class="tab-btn" data-subject="å­¦æ´»">å­¦æ´»</button>
            <button class="tab-btn" data-subject="ãã®ä»–">ãã®ä»–</button>
        </nav>

        <div class="tools-grid" id="toolsGrid">
            <!-- ãƒ„ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ -->
        </div>
    </div>

    <!-- QRãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="qr-modal-overlay" id="qrModalOverlay">
        <div class="qr-modal">
            <div id="qrToolName">ãƒ„ãƒ¼ãƒ«å</div>
            <div id="qrCodeContainer"></div>
            <button class="close-qr-btn" onclick="closeQrModal()">é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-firestore.js";

        // Firebaseè¨­å®šï¼ˆindex.htmlã¨åŒã˜ï¼‰
        const firebaseConfig = {
            apiKey: "AIzaSyBx2B8AemAyoXFNR6kmWk1OCsnUNHFc4kI",
            authDomain: "gen-lang-client-0309545089.firebaseapp.com",
            projectId: "gen-lang-client-0309545089",
            storageBucket: "gen-lang-client-0309545089.firebasestorage.app",
            messagingSenderId: "400466016438",
            appId: "1:400466016438:web:eed4fc62974097e26cce17",
            measurementId: "G-XL68PEV1QD"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const toolsCol = collection(db, 'tools');

        let allTools = [];

        // ãƒ„ãƒ¼ãƒ«èª­ã¿è¾¼ã¿
        async function loadTools() {
            try {
                const q = query(toolsCol, orderBy('createdAt', 'desc'));
                const snapshot = await getDocs(q);
                allTools = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderTools(allTools);
            } catch (error) {
                console.error("Error loading tools:", error);
            }
        }

        // ãƒ„ãƒ¼ãƒ«æç”»
        function renderTools(tools) {
            const grid = document.getElementById('toolsGrid');
            grid.innerHTML = '';

            tools.forEach(tool => {
                const card = document.createElement('div');
                card.className = 'tool-card';
                card.innerHTML = `
                    <div class="card-header ${tool.subject}"></div>
                    <div class="card-body">
                        <span class="subject-badge ${tool.subject}">${getEmoji(tool.subject)} ${tool.subject}</span>
                        <h2 class="tool-title">${tool.name}</h2>
                        <div class="action-buttons">
                            <a href="${tool.url}" target="_blank" class="open-btn">
                                ğŸš€ é–‹ã
                            </a>
                            <button class="qr-btn" onclick="window.showQr('${tool.name}', '${tool.url}')">
                                ğŸ“±
                            </button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // ä»¶ååˆ¥çµµæ–‡å­—
        function getEmoji(subject) {
            const map = {
                'å›½èª': 'ğŸ“–', 'ç®—æ•°': 'ğŸ”¢', 'ç†ç§‘': 'ğŸ”¬', 'ç¤¾ä¼š': 'ğŸŒ',
                'è‹±èª': 'ğŸ”¤', 'éŸ³æ¥½': 'ğŸµ', 'å›³å·¥': 'ğŸ¨', 'ä½“è‚²': 'âš½',
                'é“å¾³': 'ğŸ§¡', 'å®¶åº­ç§‘': 'ğŸ³', 'ç·åˆ': 'ğŸ”', 'å­¦æ´»': 'ğŸ«',
                'ãã®ä»–': 'ğŸ“'
            };
            return map[subject] || 'ğŸ“„';
        }

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        document.getElementById('subjectTabs').addEventListener('click', (e) => {
            if (!e.target.classList.contains('tab-btn')) return;

            // ã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');

            // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            const subject = e.target.dataset.subject;
            if (subject === 'all') {
                renderTools(allTools);
            } else {
                renderTools(allTools.filter(t => t.subject === subject));
            }
        });

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å…¬é–‹
        window.showQr = (name, url) => {
            document.getElementById('qrToolName').textContent = name;
            const container = document.getElementById('qrCodeContainer');
            container.innerHTML = '';
            new QRCode(container, {
                text: url,
                width: 200,
                height: 200
            });
            document.getElementById('qrModalOverlay').style.display = 'flex';
        };

        window.closeQrModal = () => {
            document.getElementById('qrModalOverlay').style.display = 'none';
        };

        // åˆæœŸåŒ–
        loadTools();
    </script>
</body>

</html>